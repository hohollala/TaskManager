# Shrimp Task Manager 코드맵

이 문서는 Shrimp Task Manager 프로젝트의 소스 코드 구조와 주요 구성 요소에 대한 개요를 제공합니다.

## 1. 프로젝트 구조

프로젝트는 다음과 같은 주요 디렉토리로 구성됩니다.

- **`src`**: 애플리케이션의 핵심 로직이 담긴 메인 소스 코드 디렉토리입니다.
- **`docs`**: 프로젝트 관련 문서가 저장되는 공간입니다.
- **`tools`**: 프로젝트에서 사용하는 보조 도구, 특히 `task-viewer`가 위치합니다.
- **`scripts`**: 설치 및 실행에 관련된 스크립트가 포함됩니다.

---

## 2. 핵심 로직 (`src`)

`src` 디렉토리는 애플리케이션의 심장부이며, 기능별로 모듈화되어 있습니다.

### 2.1. 진입점 (`src/index.ts`)

- 애플리케이션의 시작점입니다.
- CLI(명령줄 인터페이스)를 초기화하고, 사용자의 입력을 받아 각 기능에 맞는 도구(Tool)를 실행하는 오케스트레이션 역할을 합니다.

### 2.2. 데이터 모델 (`src/models/taskModel.ts`)

- 프로젝트의 핵심 데이터 구조인 `Task`의 타입(interface)을 정의합니다.
- `id`, `name`, `status`, `subTasks` 등 작업 관리에 필요한 속성을 포함합니다.

### 2.3. 프롬프트 시스템 (`src/prompts/`)

- LLM(거대 언어 모델)에 전달할 프롬프트를 동적으로 생성하는 역할을 담당합니다.
- **`generators/`**: `analyzeTask`, `planTask` 등 각 기능에 맞는 프롬프트 생성 로직이 담겨 있습니다.
- **`templates_en/`, `templates_ko/`**: 영어와 한국어 프롬프트 템플릿을 저장합니다. 각 기능별 디렉토리로 나뉘어 관리됩니다.
- **`loader.ts`**: 템플릿 파일을 읽어오는 로더입니다.

### 2.4. 도구 (Tools) (`src/tools/`)

- LLM이 프롬프트 분석 후 호출하는 실제 기능의 구현체입니다. 각 도구는 특정 작업을 수행합니다.
- **`task/`**: `listTasks`, `deleteTask`, `updateTask` 등 작업(Task)과 관련된 핵심 기능들이 위치합니다.
- **`project/`**: `initProjectRules`와 같이 프로젝트 단위의 작업을 처리합니다.
- **`research/`**: `researchMode` 등 리서치 관련 기능을 담당합니다.
- **`thought/`**: `processThought`와 같이 LLM의 내부적인 사고 과정을 처리하는 도구가 있습니다.

### 2.5. 유틸리티 (`src/utils/`)

- 프로젝트 전반에서 사용되는 헬퍼 함수들을 모아놓은 디렉토리입니다.
- **`fileLoader.ts`**: 파일 시스템에서 파일을 읽어오는 기능을 제공합니다.
- **`paths.ts`**: 프로젝트 내의 주요 경로를 관리합니다.
- **`commandGenerator.ts`**: 특정 작업을 수행하기 위한 커맨드를 생성합니다.

### 2.6. 웹 서버 및 UI (`src/web/`, `src/public/`)

- **`web/webServer.ts`**: 작업(Task)을 시각적으로 보여주는 웹 인터페이스를 위한 간단한 웹 서버를 구현합니다.
- **`public/`**: 웹 UI를 구성하는 `index.html`, `style.css`, `script.js` 파일 및 다국어 지원을 위한 `locales/` 디렉토리가 위치합니다.

---

## 3. 보조 도구 (`tools`)

### 3.1. Task Viewer (`tools/task-viewer/`)

- 현재 관리 중인 작업 목록을 시각적으로 확인하고 상호작용할 수 있는 별도의 웹 애플리케이션입니다.
- React(`App.jsx`) 기반으로 구축되었으며, 자체적인 서버(`server.js`)를 가집니다.
- 이를 통해 사용자는 CLI 환경뿐만 아니라 GUI 환경에서도 작업 상태를 쉽게 파악할 수 있습니다.

---

## 4. 주요 실행 흐름

1.  **사용자 입력**: 사용자가 CLI를 통해 명령을 입력합니다. (예: `shrimp list tasks`)
2.  **프롬프트 생성**: `src/index.ts`는 사용자 입력을 해석하여 `src/prompts/generators/` 내의 적절한 프롬프트 생성기를 호출합니다.
3.  **LLM 처리**: 생성된 프롬프트가 LLM에 전달되어 분석됩니다.
4.  **도구 실행**: LLM은 분석 결과를 바탕으로 실행해야 할 도구를 결정하고, `src/tools/`에 구현된 해당 도구를 호출합니다.
5.  **결과 반환**: 도구는 실제 작업을 수행하고, 그 결과를 사용자에게 다시 CLI를 통해 출력합니다.
6.  **웹 뷰어 (선택 사항)**: 사용자는 `task-viewer`를 실행하여 현재 작업 상태를 웹 UI로 확인할 수 있습니다.
